{
  "summary": "Updated the meta reviewer guidance and planner to enforce module dependency discipline and confidence reporting.",
  "checklist": [
    {
      "id": "C7",
      "status": "implemented",
      "notes": "Meta prompt, solver, and docs now cover requires[] checks and confidence capture."
    }
  ],
  "architecture": {
    "components_added": [],
    "components_modified": [],
    "data_flow": "Coverage metadata (provides_ports/requires) now feeds the meta CLI scorer before greedy selection.",
    "state_management": "The meta CLI stores selected module ports and requirements in sets while evaluating gains.",
    "invariants": [
      "Coverage entries include provides_ports and requires arrays when dependencies exist.",
      "When --respect-requires is enabled the planner never selects a module without a satisfied provider."
    ],
    "tradeoffs": [
      "Skipping modules until dependencies are satisfied may leave some goals uncovered if providers are missing, but avoids unsafe plans."
    ],
    "alternatives_considered": [
      {
        "option": "Penalize unmet requires with a smaller score deduction",
        "rejected_because": "Deterministically excluding modules keeps the greedy heuristic predictable and dependency-safe."
      }
    ],
    "open_questions": [
      "Should the planner discover manifests automatically when coverage omits provides_ports metadata?"
    ]
  },
  "tests": {
    "added": [],
    "how_to_run": "node tm.mjs meta --coverage ./examples/coverage.json --respect-requires --out ./examples/compose.greedy.json"
  },
  "metrics": {
    "files_changed": 11,
    "insertions": 239,
    "deletions": 58
  },
  "risks": [
    "Coverage producers that skip provides_ports/requires may see modules dropped under --respect-requires."
  ],
  "todos": [
    "Consider adding manifest discovery so --respect-requires can infer ports without annotated coverage."
  ]
}
